# .ai 文件夹使用指南 - 项目知识库系统

## 📌 概述

`.ai` 文件夹是一个 **项目知识库系统**，用于记录项目信息、问题、解决方案、关键代码位置等。它帮助 AI 助手（和人类开发者）快速理解项目并避免重复错误。

## 🎯 核心目的

1. **知识积累** - 记录项目演进过程中遇到的所有问题和解决方案
2. **快速上手** - 新对话时快速了解项目结构和背景
3. **错误预防** - 避免重复犯同样的错误
4. **最佳实践** - 保存关键代码位置和常用命令

## 📁 文件结构

```
.ai/
├── README.md                      # 系统说明（本体）
├── MUST_READ_FIRST.md             # 强制规则和快速检查清单
├── PROJECT_OVERVIEW.md            # 项目基本信息和架构
├── IMPORTANT_NOTES.md        # 关键代码位置、常用命令、常见错误
├── ISSUES_AND_SOLUTIONS.md        # 所有遇到的问题和解决方案
└── .INIT_REQUIRED               # 初始化完成标记
```

## 📖 每个文件的职责

### 1. **README.md** - 系统说明
- 用途：解释 .ai 文件夹的目的和使用规则
- 内容：
  - 各文件的用途和何时使用
  - 使用规则（对 AI 和用户）
  - 文档维护规范
  - 标记规范（✅ ❌ ⚠️ 等）

### 2. **MUST_READ_FIRST.md** - 强制规则⚠️
- 用途：AI 助手每次新对话必读
- 内容：
  - 协议约定（强制规则）
  - 新对话、修改代码、结束对话时的强制步骤
  - 项目关键信息速查表
  - 常见错误预防清单
  - 快速检查清单

### 3. **PROJECT_OVERVIEW.md** - 项目概览
- 用途：快速了解项目结构和信息
- 内容：
  - 项目基本信息（名称、版本、语言、License）
  - 项目描述和核心特性
  - 详细的目录结构说明
  - 主要依赖关系
  - 重要配置文件
  - 主题信息

### 4. **IMPORTANT_NOTES.md** - 关键信息🔧
- 用途：快速查找关键代码位置和常见问题
- 内容：
  - 关键代码位置（模板、配置、样式等）
  - 常用命令（快速参考）
  - 文件修改检查清单（修改前必读）
  - 常见错误和解决方案
  - 安全操作方式

### 5. **ISSUES_AND_SOLUTIONS.md** - 问题库📋
- 用途：记录所有遇到的问题和解决方案
- 内容：
  - 问题描述
  - 根本原因分析
  - 采用的解决方案（✅ 成功的）
  - 失败的尝试（❌ 标记）
  - 关键修改位置
  - 经验教训和启示

## 🔄 工作流程

### 📍 新对话开始时（MUST）

```
1. 读取 .ai/MUST_READ_FIRST.md
   ↓
2. 读取 .ai/PROJECT_OVERVIEW.md
   ↓
3. 读取 .ai/IMPORTANT_NOTES.md
   ↓
4. 读取 .ai/ISSUES_AND_SOLUTIONS.md
   ↓
5. 开始工作
```

### 🔨 修改代码时（MUST）

```
代码修改 → 修改完成
   ↓
更新 .ai/ISSUES_AND_SOLUTIONS.md
   ↓
如有新发现，更新 .ai/IMPORTANT_NOTES.md
   ↓
git add .ai/
git commit "修改内容 + .ai 文档更新"
```

### ✅ 结束对话前（MUST）

```
代码修改 ✓
   ↓
.ai/ISSUES_AND_SOLUTIONS.md 更新 ✓
   ↓
.ai/IMPORTANT_NOTES.md 更新 ✓
   ↓
.ai/ 文件已 commit ✓
   ↓
准备完成！
```

## 📝 标记规范

在记录内容时使用以下标记：

| 标记 | 用途 | 示例 |
|------|------|----|
| `✅` | 成功的解决方案 | ✅ 使用 Hugo partial 嵌套来复用模板代码 |
| `❌` | 失败的尝试或已撤销的方案 | ❌ 直接在 HTML 中嵌入样式（导致性能问题） |
| `⚠️` | 需要注意的地方 | ⚠️ 修改 module 中的模板时要同时测试响应式设计 |
| `📋` | 信息记录 | 📋 当前支持 Hugo 0.87+ |

## 🎓 内容编写指南

### ISSUES_AND_SOLUTIONS.md 的结构

```markdown
## 问题名称

**发现时间**: 2026-02-20
**状态**: ✅ 已解决

### 问题描述
[具体描述问题现象]

### 根本原因分析
[分析为什么会出现这个问题]

### 解决方案
[详细说明采取的解决方案]

### 关键修改
- [文件路径] - [简要说明改动]
- [提交信息]

### 失败尝试（供参考）
- ❌ [尝试过但不行的方法]
- ❌ [另一个不行的方法]

### 经验教训
[从这个问题中学到了什么，如何预防类似问题]
```

### IMPORTANT_NOTES.md 的结构

```markdown
## 关键代码位置

### [功能分类]
- **[文件路径]**: [简要说明功能]
- **[另一个位置]**: [说明]

## 常用命令

### [命令分类]
```bash
[完整命令示例]
# [说明]
```

## 常见错误和解决

### [错误名称]
**症状**: [现象]
**原因**: [根本原因]
**解决**: [解决步骤]
```

## 🚀 在项目中使用

### 初始化步骤

1. **文件夹已创建** ✅
2. **填充内容** - 根据 Sonic PaperMod 主题特性填充各文件
3. **配置 Git** - 提交所有 `.ai/` 文件
4. **（可选）Git 钩子** - 安装脚本确保每次代码更新时更新知识库

### Git 钩子（推荐）

项目包含可选的 Git 钩子脚本来强化 `.ai/` 更新规则：

```bash
# 安装钩子
bash scripts/install-git-hooks.sh

# 卸载钩子
rm .git/hooks/pre-commit
```

## 💡 最佳实践

### ✅ 应该做的事

1. **定期更新** - 每次修改代码都更新 .ai/
2. **详细记录** - 包括问题、原因、解决方案、学到的东西
3. **及时标记** - 使用 ✅❌⚠️ 清晰标记内容状态
4. **保持文档最新** - 定期检查是否需要更新时间戳
5. **分享知识** - 在 ISSUES_AND_SOLUTIONS.md 中详细记录教训

### ❌ 不要做的事

1. **修改代码但不更新 .ai/** - 违反强制规则
2. **提交不包含 .ai/ 的更改** - 知识库会过期
3. **删除或覆盖 .ai/ 内容** - 会丢失宝贵的知识
4. **记录错误信息** - 只记录验证过的正确解决方案
5. **忽视 .ai 文件的更新** - 导致 AI 和人类开发者做重复工作

## 📊 维护时间投入

一个中等规模的问题记录通常需要：
- 简单问题：2-3 分钟
- 复杂问题：5-10 分钟
- 关键代码位置记录：1-2 分钟

**总体而言，维护 .ai 文件的时间投入远小于后续重复错误的成本！**

## 🎯 总结

`.ai` 文件夹是一个 **简单但强大的系统**：

✅ **好处**:
- 减少重复错误
- 加快问题解决速度
- 帮助 AI 更好地理解项目
- 建立项目知识库
- 提高团队效率
⏱️ **投入**:
- 初始设置：15-30 分钟
- 每次维护：2-10 分钟
- 长期收益：**节省数小时到数天的重复工作**

---

**推荐**：在任何需要长期维护的项目上使用这个系统！
