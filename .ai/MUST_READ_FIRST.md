# ⚠️ 必读 - Sonic PaperMod 主题强制规则

> **每次新对话开始时，AI 助手必须完整阅读本文档**

## 🎯 新对话初始化检查表（AI 必读）

**新对话开始时，请按以下顺序执行：**
1. **检查 `.ai/` 文件夹的完整性**
   ```bash
   ls -la .ai/
   # 必须存在以下文件：
   # - .INIT_REQUIRED
   # - README.md
   # - MUST_READ_FIRST.md (当前文件)
   # - PROJECT_OVERVIEW.md
   # - IMPORTANT_NOTES.md
   # - ISSUES_AND_SOLUTIONS.md
   ```

2. **验证初始化状态**
   ```bash
   bash scripts/check-ai-init.sh
   ```
   ✅ 如果显示 "✓ .ai 文件夹已初始化"，则继续
   ❌ 如果显示错误，立即停止并报告问题

3. **按顺序阅读以下文件**（必须一个接一个）
   - [ ] `.ai/MUST_READ_FIRST.md` (当前文件) - **5分钟**
   - [ ] `.ai/PROJECT_OVERVIEW.md` - **10分钟**
   - [ ] `.ai/IMPORTANT_NOTES.md` - **10分钟**
   - [ ] `.ai/ISSUES_AND_SOLUTIONS.md` - **10分钟**

4. **确认理解**
   完成阅读后，向用户确认：
   > "✅ 已完成初始化检查。我理解了以下关键点：
   > - 项目是 Sonic Hugo 主题
   > - 修改代码后必须同时更新 .ai/ 文件
   > - 代码和文档必须一起 commit
   > - 禁止提交代码而不更新 .ai/ 文件"

5. **然后才能开始工作**

## 🔒 强制规则

### 规则 1：项目理解（新对话开始时）
- [ ] 阅读本文件（MUST_READ_FIRST.md）
- [ ] 阅读 PROJECT_OVERVIEW.md
- [ ] 阅读 IMPORTANT_NOTES.md
- [ ] 阅读 ISSUES_AND_SOLUTIONS.md
- [ ] 然后才能开始工作

### 规则 2：代码修改与文档同步
当修改任何模板、样式或配置文件时：
- [ ] 完成代码修改
- [ ] 立即更新 `.ai/ISSUES_AND_SOLUTIONS.md`（记录解决了什么问题）
- [ ] 更新 `.ai/IMPORTANT_NOTES.md`（如果有新的关键发现）
- [ ] 执行 `git add .ai/` 同时提交文档更新

**不允许** 提交代码更改而不更新 `.ai/` 文件！

### 规则 3：提交信息规范
代码和 `.ai/` 文档必须一起提交：
```bash
git add [修改的文件]
git add .ai/
git commit "feat/fix/docs: [描述] + .ai 文档更新"
```

### 规则 4：结束对话前检查清单
在结束对话之前，必须确认：
- [ ] 所有代码修改都已完成并测试
- [ ] `.ai/ISSUES_AND_SOLUTIONS.md` 已更新
- [ ] `.ai/IMPORTANT_NOTES.md` 已更新（如果有新信息）
- [ ] 所有 `.ai/` 文件修改都已 staged/committed
- [ ] 无重要信息遗漏

## 📋 项目快速信息表

| 项目 | 值 |
|------|-----|
| **项目名称** | Sonic PaperMod |
| **项目类型** | Hugo 主题 |
| **编程语言** | HTML / CSS / Hugo Templates |
| **基础项目** | [hugo-papermod](https://github.com/adityatelange/hugo-PaperMod) |
| **目标平台** | Sonic 博客平台 |
| **License** | MIT |
| **主要特性** | 快速、流畅、响应式、深浅色模式 |
| **版本管理** | Git |

## 🎯 项目核心特性（必知）

### 主题功能
- ✅ 浅色/深色模式支持
- ✅ 响应式设计
- ✅ 快速加载
- ✅ 流畅交互

### 待实现功能（TODO）
- 🔲 搜索功能
- 🔲 评论系统
- 🔲 代码高亮
- 🔲 更多自定义选项

## ⚠️ 关键预防清单

修改前必读！常见错误和如何避免：

### 1️⃣ 模板修改相关
- ❌ **错误**：直接修改 `module/` 中的模板而不测试响应式
- ✅ **正确**：修改后在多个尺寸（手机、平板、桌面）上测试
### 2️⃣ 样式修改相关
- ❌ **错误**：直接编辑 `assets/main.css` 的关键代码而不创建备份
- ✅ **正确**：记录原始代码，修改后立即测试所有颜色模式

### 3️⃣ 配置修改相关
- ❌ **错误**：修改 `theme.yaml` 而不理解 Sonic 配置系统
- ✅ **正确**：先查看 Sonic 官方文档，理解各个配置项的含义

### 4️⃣ 文件操作相关
- ❌ **错误**：删除或重命名关键模板文件而不更新引用
- ✅ **正确**：使用 grep 查找所有引用，同时更新所有依赖项

### 5️⃣ 文档更新相关
- ❌ **错误**：代码改完了但忘记更新 `.ai/` 文件
- ✅ **正确**：代码修改和文档更新同时进行

## 🔍 项目检查清单（每次开始工作前）

在开始任何修改之前，检查以下项目：

### 代码修改前：
- [ ] 我清楚理解要修改的问题
- [ ] 我知道相关文件的位置（查看 IMPORTANT_NOTES.md）
- [ ] 我了解修改可能的影响范围
- [ ] 我有回滚计划（记住原始代码）

### 代码修改中：
- [ ] 我按步骤修改，不急功近利
- [ ] 我记录了关键改动点
- [ ] 我测试了修改的效果

### 代码修改后：
- [ ] 代码能正确运行（测试通过）
- [ ] 没有引入新的问题
- [ ] 我已更新 `.ai/ISSUES_AND_SOLUTIONS.md`
- [ ] 我已 git add 和提交

## 📖 文档导航

**按顺序阅读以下文件**：

1. **本文件** (MUST_READ_FIRST.md) ← 你在这里
   - 强制规则、快速参考信息、预防清单

2. **PROJECT_OVERVIEW.md**
   - 项目结构、文件说明、配置信息

3. **IMPORTANT_NOTES.md**
   - 关键代码位置、常用命令、常见错误和解决

4. **ISSUES_AND_SOLUTIONS.md**
   - 历史问题、解决方案、经验教训

5. **README.md**（如果需要了解 .ai 系统本身）
   - .ai 文件夹系统的完整说明

## 🚀 快速开始命令

```bash
# 进入项目目录
cd /home/work/sonic-theme-papermod

# 查看项目状态
git status

# 查看当前分支
git branch -a

# 查看最近提交
git log --oneline -5

# 查看项目结构
ls -la
```

## 📞 获取帮助

遇到问题？查看以下地方：

1. **常见错误** → 查看 IMPORTANT_NOTES.md 中的"常见错误和解决"部分
2. **历史问题** → 查看 ISSUES_AND_SOLUTIONS.md 中是否有类似问题的记录
3. **关键位置** → 查看 IMPORTANT_NOTES.md 中的"关键代码位置"
4. **命令参考** → 查看 IMPORTANT_NOTES.md 中的"常用命令"

## ✅ 确认已读

当你看到这个 ✅ 符号时，说明你已确认理解了本文档的内容。

请在回复中明确指出：
```
✅ 已读 MUST_READ_FIRST.md
```

然后才能继续处理任何与项目相关的请求。

---

**最后提醒**：
- 🔒 这些规则不是建议，是**强制**的
- 📝 每次代码改动都要更新 `.ai/`
- ⚠️ 不遵循规则可能导致知识丢失和重复错误
- 💪 共同维护项目知识库，让每个人受益！
