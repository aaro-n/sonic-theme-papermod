# PaperMod ä¸»é¢˜å‚æ•°ä¿å­˜åˆ†æ

## é—®é¢˜è¯Šæ–­

ç»è¿‡æ£€æŸ¥ï¼Œä¸»é¢˜å‚æ•°çš„ä¿å­˜æƒ…å†µå¦‚ä¸‹ï¼š

### âœ… ä¼šæ­£å¸¸ä¿å­˜åˆ°æ•°æ®åº“çš„å‚æ•°

| å‚æ•°å | ç±»å‹ | æ˜¯å¦ä¿å­˜ | å¤‡æ³¨ |
|-------|------|--------|------|
| `header_title` | text | âœ… | åœ¨ header.tmpl ä¸­ä½¿ç”¨ |
| `home_info_title` | text | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `home_info_content` | textarea | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `copyright` | textarea | âœ… | åœ¨ footer.tmpl ä¸­ä½¿ç”¨ |
| `comment_code` | textarea | âœ… | åœ¨ comments.tmpl ä¸­ä½¿ç”¨ |
| `rss` | radio | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `github` | text | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `twitter` | text | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `email` | text | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |
| `qq` | text | âœ… | åœ¨ index.tmpl ä¸­ä½¿ç”¨ |

### âš ï¸ å‚æ•°ä¿å­˜çš„å‰ææ¡ä»¶

1. **å‚æ•°å¿…é¡»åœ¨ `settings.yaml` ä¸­å®šä¹‰**
   - éœ€è¦ `name` å­—æ®µï¼ˆæ•°æ®åº“ä¸­çš„å®é™…å­—æ®µåï¼‰
   - éœ€è¦ `label` å­—æ®µï¼ˆåå°æ˜¾ç¤ºæ ‡ç­¾ï¼‰
   - éœ€è¦ `type` å­—æ®µï¼ˆå­—æ®µç±»å‹ï¼‰
   - å»ºè®®æœ‰ `default` å­—æ®µï¼ˆé»˜è®¤å€¼ï¼‰

2. **å‚æ•°å¿…é¡»åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ä½¿ç”¨**
   - `.settings.{å‚æ•°å}` - è®¿é—®å‚æ•°å€¼
   - å³ä½¿å‚æ•°ä¸ºç©ºï¼Œä¹Ÿéœ€è¦åœ¨æ¨¡æ¿ä¸­æ˜¾å¼æ£€æŸ¥
   - Sonic åªä¿å­˜è¢«å¼•ç”¨çš„å‚æ•°

3. **å‚æ•°ç±»å‹è¦æ­£ç¡®**
   - `text` - çŸ­æ–‡æœ¬ï¼ˆè¾“å…¥æ¡†ï¼‰
   - `textarea` - é•¿æ–‡æœ¬ï¼ˆæ–‡æœ¬åŸŸï¼‰
   - `radio` - å•é€‰æ¡†ï¼ˆéœ€è¦ `options` é…ç½®ï¼‰
   - `checkbox` - å¤šé€‰æ¡†
   - `select` - ä¸‹æ‹‰æ¡†ï¼ˆéœ€è¦ `options` é…ç½®ï¼‰

### ğŸ“ Sonic çš„å‚æ•°å¤„ç†é€»è¾‘

```
settings.yaml å®šä¹‰
    â†“
åå° UI ç”Ÿæˆè¡¨å•
    â†“
ç”¨æˆ·è¾“å…¥/ä¿å­˜æ•°æ®
    â†“
å­˜å‚¨åˆ°æ•°æ®åº“
    â†“
æ¨¡æ¿æ¸²æŸ“æ—¶ä»æ•°æ®åº“è¯»å– (.settings.xxx)
    â†“
å¦‚æœæ¨¡æ¿ä¸­æ²¡æœ‰ä½¿ç”¨è¯¥å‚æ•° â†’ å‚æ•°å¯èƒ½ä¸è¢«ä¿å­˜æˆ–åŠ è½½
```

### âŒ æ¢å¤åˆ°é»˜è®¤å€¼çš„åŸå› 

1. **å‚æ•°æœªåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨**
   - å¦‚æœåœ¨ `settings.yaml` ä¸­å®šä¹‰ï¼Œä½†åœ¨ä»»ä½•æ¨¡æ¿ä¸­éƒ½æ²¡æœ‰ä½¿ç”¨ `.settings.{å‚æ•°å}`
   - Sonic å¯èƒ½ä¸ä¼šå°†å…¶ä¿å­˜åˆ°æ•°æ®åº“

2. **å‚æ•°åä¸åŒ¹é…**
   - `settings.yaml` ä¸­çš„ `name` ä¸æ¨¡æ¿ä¸­å¼•ç”¨çš„åç§°ä¸ä¸€è‡´

3. **å­—æ®µç±»å‹æ”¹å˜**
   - å¦‚æœä¿®æ”¹äº† `type`ï¼ˆä¾‹å¦‚ä» `text` æ”¹ä¸º `textarea`ï¼‰
   - æ—§çš„ä¿å­˜å€¼å¯èƒ½æ— æ³•æ­£ç¡®åŠ è½½

4. **æ•°æ®åº“æŸåæˆ–åŒæ­¥å¤±è´¥**
   - æŸäº›å‚æ•°åœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯

5. **æƒé™é—®é¢˜**
   - ç”¨æˆ·æ²¡æœ‰æƒé™ä¿å­˜è¯¥å‚æ•°

### ğŸ“‹ æ–°å¢å‚æ•°çš„æ­£ç¡®æ­¥éª¤

å¦‚æœè¦æ·»åŠ æ–°çš„ä¸»é¢˜å‚æ•°ï¼ˆå¦‚ `artalk_server`ï¼‰ï¼š

1. **åœ¨ `settings.yaml` ä¸­å®šä¹‰**

```yaml
settings:
  label: Setting
  items:
    # ...existing items...
    artalk_server:
      name: artalk_server
      label: Artalk server address
      type: text
      default: "https://artalk.example.com"
    comment_system:
      name: comment_system
    label: Comment system type
      type: select
      default: "artalk"
   options:
        - value: artalk
          label: Artalk
        - value: waline
     label: Waline
        - value: valine
        label: Valine
```

2. **åœ¨ç›¸åº”çš„æ¨¡æ¿ä¸­ä½¿ç”¨**

```gotmpl
{{ template "sonic_theme_paper_mod/module/comments" . }}
```

3. **åœ¨ `comments.tmpl` ä¸­è®¿é—®**

```gotmpl
{{- define "sonic_theme_paper_mod/module/comments" -}}
{{- if eq .settings.comment_system "artalk" -}}
  <!-- Artalk configuration -->
  server: '{{ .settings.artalk_server }}',
{{- else if eq .settings.comment_system "waline" -}}
  <!-- Waline configuration -->
{{- end -}}
{{- end -}}
```

4. **é‡å¯ Sonic æœåŠ¡**
   - æŸäº›æƒ…å†µä¸‹éœ€è¦é‡å¯ä»¥é‡æ–°åŠ è½½ `settings.yaml`

### ğŸ” æ£€æŸ¥å‚æ•°æ˜¯å¦å·²ä¿å­˜

1. **åå°æŸ¥çœ‹**
   - ç™»å½• Sonic åå°ï¼Œè¿›å…¥ä¸»é¢˜è®¾ç½®
   - æŸ¥çœ‹å‚æ•°æ˜¯å¦æ˜¾ç¤ºä½ è®¾ç½®çš„å€¼

2. **æ•°æ®åº“æŸ¥çœ‹**
   - ç›´æ¥æŸ¥è¯¢æ•°æ®åº“è¡¨ï¼ˆå¦‚æœæœ‰æƒé™ï¼‰
   - æŸ¥æ‰¾ç›¸åº”çš„ `theme_option` æˆ–ç±»ä¼¼è¡¨

3. **æ¨¡æ¿æ¸²æŸ“æµ‹è¯•**
   - åœ¨æ¨¡æ¿ä¸­æ·»åŠ è°ƒè¯•è¾“å‡ºï¼š`{{ .settings.parameter_name }}`
   - æŸ¥çœ‹é¡µé¢æºç ä¸­çš„å€¼

### ğŸ’¡ å»ºè®®

1. **å§‹ç»ˆä¸ºæ–°å‚æ•°æä¾›é»˜è®¤å€¼**
   - é¿å… nil é”™è¯¯

2. **åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å‚æ•°å‰æ£€æŸ¥**
   ```gotmpl
   {{- if .settings.parameter_name -}}
     {{ .settings.parameter_name }}
   {{- end -}}
   ```

3. **å‚æ•°å‘½åè¦æ¸…æ™°**
   - ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼š`comment_system`
   - é¿å…å¤§å†™å­—æ¯

4. **æ–‡æ¡£æ›´æ–°**
   - åœ¨æ–‡æ¡£ä¸­è®°å½•æ–°å¢çš„å‚æ•°
   - è¯´æ˜é»˜è®¤å€¼å’Œä½¿ç”¨æ–¹æ³•

---

æœ€åæ›´æ–°ï¼š2026å¹´2æœˆ21æ—¥
